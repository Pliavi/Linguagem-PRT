<!DOCTYPE html>
<html>
  <head>
    <title>PRTEditor</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/dark.min.css"
    />
  </head>
  <body>
    <h2>Escreva seu código PRT aqui:</h2>
    <textarea id="prtCode" cols="80" rows="20">
modulo Fatorial
  fatorial(1) retorna 1
  fatorial(n) retorna n * fatorial(n - 1)

  principal() retorna fatorial(5)
    </textarea>

    <h2>Resultado:</h2>
    <textarea disabled id="result" cols="80" rows="5"></textarea>

    <h2>Código gerado (Javascript)</h2>
    <textarea disabled id="generatedCode" cols="80" rows="20"></textarea>

    <script src="./bundle.js"></script>
    <script>
      const getResult = ev => {
        const $result = document.getElementById("result");
        const $prtCode = document.getElementById("prtCode");
        const $generatedCode = document.getElementById("generatedCode");
        try {
          const compiled = parseCode($prtCode.value);
          console.log(compiled);
          $generatedCode.value = compiled;
          $result.value = eval(compiled);
        } catch (err) {
          $result.value = err;
        }
      };

      const $prtCode = document.getElementById("prtCode");
      $prtCode.addEventListener("keypress", getResult);
      $prtCode.addEventListener("load", getResult);
    </script>
  </body>
</html>
